<template>
  <div class="payment-card" :class="{ 'payment-card--slim': isSlim }">
    <div class="payment-card__body">
      <header class="text-sm">
        <p class="">
          <nuxt-link :to="`/members/${row.payee_id}`" class="font-bold hover:text-brand-primary">{{ row.payee }}</nuxt-link>
          paid
          <nuxt-link :to="`/members/${row.recipient_id}`" class="font-bold hover:text-brand-primary">{{ row.recipient }}</nuxt-link>
        </p>
        <time :datetime="row.timestamp">{{ row.timestamp | formatDate }}</time>
      </header>
      <div class="payment-card__details">
        <h1 class="text-2xl">{{ row.title }}</h1>
        <p class="" v-if="row.description">{{ row.description }}</p>
      </div>
    </div>
    <div class="payment-card__favor">
      <div class="text-right">
        <div class="amount text-gray-600">
          <span class="">f</span>
          <span class="font-bold">{{ row.amount | favor }}</span>
        </div>
        <div class="fee text-gray-400">
          <span class="">&minus;</span>
          <span class=" font-bold">{{ row.fee | favor }}</span>
        </div>
      </div>
    </div>
    <div class="payment-card__icons">
      <MemberIcon :username="row.payee" />
      <div class="text-gray-400">&#x27F1;</div>
      <MemberIcon :username="row.recipient" :alt="true" />
    </div>
  </div>
</template>

<script>
export default {
  props: {
    row: {
      type: Object,
      required: true
    },
    isSlim: {
      type: Boolean,
      required: false
    }
  },
  filters: {
    formatDate(dateStr) {
      return Intl.DateTimeFormat("us-EN").format(new Date(dateStr))
    }
  },
}
</script>

<style lang="scss">
.payment-card {
  @apply flex gap-3 rounded-md border border-gray-300 shadow-md p-5 mb-5 last:mb-0;
  .payment-card__body {}
  .payment-card__details {}
  .payment-card__favor {
    @apply flex-shrink flex justify-center items-center font-mono ml-auto;
  }
  .payment-card__icons {
    @apply flex flex-col justify-start items-center;
  }

  &.payment-card--slim {
    @apply py-2 items-center;

    .payment-card__body header {
      @apply flex gap-2;
    }
    .payment-card__details {
      h1 { @apply text-base; }
      p { @apply hidden; }
    }
    .payment-card__icons {
      @apply hidden;
    }
  }
}
</style>